{% extends 'shared/_layout.html' %}
{% load poll_extras %}
{% block title %}
    ویرایش اطلاعات کاربری
{% endblock %}
{% block header_refrences %}
    <link rel="stylesheet" href="/static/css/custom.css">
    {% comment %}<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>{% endcomment %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="/static/js/custom.js"></script>

{% endblock %}

{% block content %}

    <main>

        <!-- =======================
        Main contain START -->
        <section class="py-4">
            <div class="container">

                <div class="row g-4">
                    <!-- Profile cover and info START -->
                    <div class="col-12">
                        <div class="card mb-4 position-relative z-index-9">
                            <!-- Cover image -->
                            <div class="py-5 h-200 rounded"
                                 style="background-image:url(/static/images/blog/16by9/big/07.jpg); background-position: center bottom; background-size: cover; background-repeat: no-repeat;">
                            </div>
                            <div class="card-body pt-3 pb-0">
                                <div class="row d-flex justify-content-between">
                                    <!-- Avatar -->
                                    {% if user.avatar %}
                                        <div class="col-sm-12 col-md-auto text-center text-md-start">
                                            <div class="avatar avatar-xxl mt-n5">
                                                <img class="avatar-img rounded-circle border border-white border-3 shadow"
                                                     src="{{ user.avatar.url }}" alt="">
                                            </div>
                                        </div>
                                    {% else %}
                                        <div class="col-sm-12 col-md-auto text-center text-md-start">
                                            <div class="avatar avatar-xxl mt-n5">
                                                <img class="avatar-img rounded-circle border border-white border-3 shadow"
                                                     src="/static/images/avatar/Defult_Profile.jpg" alt="">
                                            </div>
                                        </div>
                                    {% endif %}
                                    <!-- Profile info -->
                                    <div class="col-sm-12 col-md text-center text-md-start d-md-flex justify-content-between align-items-center">
                                        <div>
                                            <h4 class="my-1">{% if user.first_name and user.last_name %}
                                                {{ user.first_name }} {{ user.last_name }}
                                            {% elif user.first_name %}
                                                {{ user.first_name }}
                                            {% elif user.last_name %}
                                                {{ user.last_name }}
                                            {% elif user.email %}
                                                {{ user.email }}
                                            {% endif %}  <i
                                                    class="bi bi-patch-check-fill text-info small"></i></h4>
                                            <ul class="list-inline">

                                                <li class="list-inline-item"><i class="bi bi-geo-alt me-1"></i>
                                                    {{ user.city }}
                                                </li>
                                                <li class=" show-jalali list-inline-item "><i
                                                        class="bi bi-calendar-date me-1"></i>
                                                    تاریخ عضویت <bdo
                                                            dir="ltr">{{ user.date_joined|show_jalali_date }}</bdo>
                                                </li>
                                            </ul>
                                            <p class="m-0"></p>
                                        </div>
                                        <!-- Links -->
                                        <div class="d-flex align-items-center justify-content-center justify-content-md-end">
                                            <a href="#" class="btn btn-primary-soft me-3">دنبال کردن</a>
                                            <!-- Card action START -->
                                            <div class="dropdown ms-3">
                                                <a class="text-secondary" href="#" id="profileDropdown" role="button"
                                                   data-bs-toggle="dropdown" data-bs-auto-close="outside"
                                                   aria-expanded="false">
                                                    <!-- Dropdown Icon -->
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                         xmlns="http://www.w3.org/2000/svg">
                                                        <circle fill="currentColor" cx="3" cy="12" r="2.5"></circle>
                                                        <circle fill="currentColor" opacity="0.5" cx="12" cy="12"
                                                                r="2.5"></circle>
                                                        <circle fill="currentColor" opacity="0.3" cx="21" cy="12"
                                                                r="2.5"></circle>
                                                    </svg>
                                                </a>
                                                <ul class="dropdown-menu dropdown-menu-end"
                                                    aria-labelledby="profileDropdown">
                                                    <li><a class="dropdown-item" href="#"><i
                                                            class="bi bi-share me-2 fw-icon"></i>اشتراک گذاری
                                                        پروفایل</a></li>
                                                    <li><a class="dropdown-item" href="#"><i
                                                            class="bi bi-volume-mute me-2 fw-icon"></i>بیصدا کردن
                                                        نوتیفیکیشن</a></li>
                                                    <li><a class="dropdown-item text-danger" href="#"><i
                                                            class="bi bi-slash-circle me-2 fw-icon"></i>حدف حساب کاربری</a>
                                                    </li>
                                                    <li>
                                                        <hr class="dropdown-divider">
                                                    </li>
                                                    <li><a class="dropdown-item" href="#"><i
                                                            class="bi bi-flag me-2 fw-icon"></i>گزارش خطا</a></li>
                                                </ul>
                                            </div>
                                            <!-- Card action END -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Profile info END -->
                </div>

                <div class="row g-5">
                    <!-- Left sidebar START -->
                    <div class="col-lg-7 col-xxl-8">
                        <!-- Profile START -->
                        <form name="origin_form" action="{% url 'user_panel' %}" method="post"
                              enctype="multipart/form-data"> {% comment %}enctype="multipart/form-data"{% endcomment %}
                            {% csrf_token %}
                            <div class="card border mb-4">
                                <div class="card-header border-bottom p-3">
                                    <h4 class="card-header-title mb-0">حساب کاربری</h4>
                                </div>
                                <div class="card-body">
                                    <!-- Full name -->
                                    <div class="mb-3">
                                        <label class="form-label">نام کامل</label>
                                        <div class="input-group">
                                            {{ origin_form.first_name }}{{ origin_form.last_name }}

                                        </div>
                                        <div class="text-danger-emphasis">{{ origin_form.first_name.errors }}</div>
                                        <div class="text-danger-emphasis">{{ origin_form.last_name.errors }}</div>
                                    </div>
                                    <!-- Username -->
                                    <div class="mb-3">
                                        <label class="form-label">ایمیل</label>
                                        <div class="input-group">
                                            {{ origin_form.email }}

                                        </div>
                                        <div class="text-danger-emphasis">{{ origin_form.email.errors }}</div>
                                    </div>
                                    <!-- Profile picture -->
                                    <div class="mb-3">
                                        <label class="form-label">تصویر پروفایل</label>
                                        <!-- Avatar upload START -->
                                        <div class="d-flex align-items-center">

                                            {% if user.avatar %}
                                                <div class="position-relative me-3">
                                                    <!-- Avatar edit -->
                                                    <div class="position-absolute top-0 end-0  z-index-9">
                                                        <a id="uploadButton"
                                                           class="btn btn-sm btn-light btn-round mb-0 mt-n1 me-n1"
                                                           href="#"> <i class="bi bi-pencil"></i></a>
                                                        {{ origin_form.avatar }}
                                                    </div>
                                                    <!-- Avatar preview -->
                                                    <div class="avatar avatar-xl">
                                                        <img class="avatar-img rounded-circle border border-white border-3 shadow"
                                                             src="{{ user.avatar.url }}" alt="">
                                                    </div>
                                                </div>
                                            {% else %}
                                                <div class="position-relative me-3">
                                                    <!-- Avatar edit -->
                                                    <div class="position-absolute top-0 end-0  z-index-9">
                                                        <a id="uploadButton"
                                                           class="btn btn-sm btn-light btn-round mb-0 mt-n1 me-n1"
                                                           href="#"> <i class="bi bi-pencil"></i> </a>
                                                        {{ origin_form.avatar }}
                                                    </div>
                                                    <!-- Avatar preview -->
                                                    <div class="avatar avatar-xl">
                                                        <img class="avatar-img rounded-circle border border-white border-3 shadow"
                                                             src="/static/images/avatar/Defult_Profile.jpg" alt="">
                                                    </div>
                                                </div>
                                            {% endif %}

                                            <!-- Avatar remove button -->
                                            <div class="avatar-remove">
                                                {% if user.avatar %}
                                                    <button name="delete_avatar" type="submit"
                                                            class="placement-btn-1 btn btn-danger  ">حذف
                                                {% endif %}

                                                </button>
                                                <p id="imageName"></p>
                                                <a id="deleteButton" href="#">حذف تصویر انتخاب شده</a>
                                            </div>
                                        </div>
                                        <!-- Avatar upload END -->
                                    </div>
                                    <!-- Job title -->

                                    <!-- Location -->
                                    <div class="mb-3">
                                        <label class="form-label">شهر سکونت</label>
                                        {{ origin_form.city }}
                                        <div class="text-danger-emphasis">{{ origin_form.city.errors }}</div>
                                    </div>
                                    <!-- Bio -->
                                    <div class="mb-3">
                                        <label class="form-label">توضیحات</label>
                                        {{ origin_form.about_user }}
                                        <div class="form-text">توضیحات مختصری برای پروفایل شما</div>
                                    </div>
                                    <!-- Birthday -->
                                    <div>
                                        <label class="form-label">تاریخ تولد</label>
                                        {{ origin_form.birth }}
                                    </div>
                                    <!-- Save button -->
                                    <div class="d-flex justify-content-end mt-4">
                                        <button name="save_user_edit" type="submit" class="btn btn-primary">ذخیره
                                        </button>


                                    </div>
                                </div>
                            </div>

                            <!-- Profile END -->

                            <!-- Personal information START -->
                            <div class="card border mb-4">
                                <div class="card-header border-bottom p-3">
                                    <h4 class="card-header-title mb-0">اطلاعات شخصی</h4>
                                </div>
                                <div class="card-body">
                                    <!-- Skype -->
                                    <div class="mb-3">
                                        <label class="form-label">شماره تلفن همراه</label>
                                        {{ profile_form.phone }}
                                        <div class="text-danger-emphasis">{{ profile_form.phone.errors }}</div>
                                    </div>
                                    <!-- Email -->
                                    <div class="mb-3">
                                        <label class="form-label">شماره تلفن ثابت</label>
                                        {{ profile_form.home_phone }}
                                        <div class="text-danger-emphasis">{{ profile_form.home_phone.errors }}</div>
                                    </div>
                                    <!-- Address -->
                                    <div class="mb-3">
                                        <label class="form-label">آدرس</label>
                                        {{ profile_form.address }}
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">کد پستی</label>
                                        {{ profile_form.post_cart }}
                                        <div class="text-danger-emphasis">{{ profile_form.post_cart.errors }}</div>
                                    </div>
                                    <!-- Save button -->
                                    <div class="d-flex justify-content-end mt-4">
                                        <button name="save_profile_edit" type="submit" class="btn btn-primary">ذخیره
                                        </button>

                                    </div>
                                </div>
                            </div>
                        </form>
                        <!-- Personal information END -->

                        <!-- Social links START -->
                        <!-- Social links END -->

                        <!-- Update password START -->
                        <form action="{% url 'user_panel' %}" method="post">
                            {% csrf_token %}
                            <div class="card border">
                                <div class="card-header border-bottom p-3">
                                    <h4 class="card-header-title mb-0">تغییر رمز عبور</h4>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="currentpassword" class="form-label">رمز عبور فعلی</label>
                                        {{ password_form.current_password }}
                                        <div class="text-danger-emphasis">{{ password_form.current_password.errors }}</div>
                                    </div>
                                    <!-- New password -->
                                    <div class="mb-3">
                                        <label for="pass_show" class="form-label" id="psw-strength-message">رمز عبور
                                            جدید</label>
                                        <div class="input-group">
                                            {{ password_form.password }}

                                            <span class="input-group-text p-0"><a href="" id="togglelink"><i
                                                    class="fakepasswordicon far fa-eye cursor-pointer p-2 w-40px"></i></a></span>

                                        </div>
                                        <div class="rounded mt-1" id="psw-strength"></div>
                                        <div class="text-danger-emphasis">{{ password_form.password.errors }}</div>
                                    </div>
                                    <!-- New password -->
                                    <div>
                                        <label for="confirmpassword" class="form-label">تکرار رمز عبور جدید</label>
                                        {{ password_form.confirm_password }}
                                        <div class="text-danger-emphasis">{{ password_form.confirm_password.errors }}</div>
                                    </div>
                                    <div class="d-flex justify-content-end mt-4">
                                        <button name="change_password" type="submit" class="btn btn-primary">ذخیره
                                        </button>
                                    </div>
                                </div>
                            </div>
                    </div>
                    </form>

                    <!-- Left sidebar END -->

                    <!-- Right sidebar START -->
                    <div class="col-lg-5 col-xxl-4">
                        <!-- Profile Setting START -->
                        <div class="card border mb-4">
                            <div class="card-header border-bottom p-3">
                                <h4 class="card-header-title mb-0">تنظیمات حساب کاربری</h4>
                            </div>
                            <div class="card-body">
                                <div class="form-check form-switch form-check-md mb-3">
                                    <input class="form-check-input" type="checkbox" id="availabilityCheck" checked="">
                                    <label class="form-check-label" for="availabilityCheck">نمایش پروفایل برای
                                        همه</label>
                                </div>
                                <div class="form-check form-switch form-check-md mb-3">
                                    <input class="form-check-input" type="checkbox" id="proCheck" disabled="">
                                    <label class="form-check-label" for="proCheck">غیرفعالسازی تبلیغات <span
                                            class="badge bg-primary align-middle">حرفه ای</span></label>
                                </div>
                            </div>
                        </div>
                        <!-- Profile Setting END -->

                        <!-- Notifications START -->
                        <div class="card border mb-4">
                            <div class="card-header border-bottom p-3">
                                <h4 class="card-header-title mb-0">مدیریت اعلان ها</h4>
                            </div>
                            <!-- Card body START -->
                            <div class="card-body">
                                <p>نوتیف هایی که مایل به دریافت آن هستید را فعال کرده و مابقی را غیرفعال نمایید.</p>
                                <div class="form-check form-switch form-check-md mb-3">
                                    <input class="form-check-input" type="checkbox" id="withdrawalCheck" checked="">
                                    <label class="form-check-label" for="withdrawalCheck">برداشت وجه</label>
                                </div>
                                <div class="form-check form-switch form-check-md mb-3">
                                    <input class="form-check-input" type="checkbox" id="weeklyCheck">
                                    <label class="form-check-label" for="weeklyCheck">گزارش هفتگی</label>
                                </div>
                                <div class="form-check form-switch form-check-md mb-3">
                                    <input class="form-check-input" type="checkbox" id="passwordCheck" checked="">
                                    <label class="form-check-label" for="passwordCheck">تغییر رمز عبور</label>
                                </div>
                                <div class="form-check form-switch form-check-md mb-3">
                                    <input class="form-check-input" type="checkbox" id="dataCheck">
                                    <label class="form-check-label" for="dataCheck">هشدار مصرف داده</label>
                                </div>
                            </div>
                            <!-- Card body END -->
                        </div>
                        <!-- Notifications START -->

                        <!-- Deactivate account START -->
                        <form action="{% url 'user_panel' %}" method="post">
                            {% csrf_token %}
                            <div class="card border mb-4">
                                <div class="card-header border-bottom p-3">
                                    <h4 class="card-header-title mb-0">حذف حساب کاربری</h4>
                                </div>
                                <div class="card-body">
                                    <h6>قبل از حذف به نکات زیر دقت نمایید...</h6>
                                    <ul>
                                        <li>با حذف حساب کاربری خود هیچ راهی برای بازیابی آن وجود نخواهد داشت.</li>
                                        <li>با حذف حساب کاربری خود در صورت وجود سابقه خرید محصول برخی از اطلاعات شما پاک
                                            نمیشود
                                        </li>
                                    </ul>
                                    <div class="form-check form-check-md my-3">
                                        <label class="form-check-label" for="deleteaccountCheck">بله، می خواهم حساب خود
                                            را
                                            حذف کنم.</label>
                                        {{ delete_form.delete_check }}
                                        <div class="text-danger-emphasis">{{ delete_form.delete_check.errors }}</div>

                                    </div>
                                    <button name="deleteacount1" type="submit" class="btn btn-sm btn-danger mb-0 me-2">
                                        حذف
                                    </button>

                                </div>
                            </div>
                        </form>
                        <!-- Deactivate account START -->
                        <p><i class="bi bi-info-circle me-2"></i>این حساب در 14 خرداد 1400 ایجاد شده است.</p>

                        <div class="card bg-transparent border rounded-3 mt-4">
                            <!-- Card header -->
                            <div class="card-header bg-transparent border-bottom p-3">
                                <h4 class="card-header-title mb-0">حساب های فعال</h4>
                            </div>
                            <!-- Card body START -->
                            <div class="card-body">
                                <!-- Google -->
                                <div class="position-relative mb-3 mt-3 d-sm-flex bg-success bg-opacity-10 border border-success p-3 rounded">
                                    <!-- Title and content -->
                                    <h2 class="fs-1 mb-0 me-3"><i class="fab fa-google text-google-icon"></i></h2>
                                    <div>
                                        <div class="position-absolute top-0 start-100 translate-middle bg-white rounded-circle lh-1 h-20px">
                                            <i class="bi bi-check-circle-fill text-success fs-5"></i>
                                        </div>
                                        <h6 class="mb-1">Google</h6>
                                        <p class="mb-1 small">شما با موفقیت به حساب Google خود وصل شده اید.</p>
                                        <!-- Button -->
                                        <button type="button" class="btn btn-sm btn-danger mb-0 me-2">خروج</button>
                                        <a href="#" class="btn btn-sm btn-link text-body mb-0">کسب اطلاعات</a>
                                    </div>
                                </div>

                                <!-- Blogger -->
                                <div class="mb-3 d-sm-flex border p-3 rounded">
                                    <!-- Title and content -->
                                    <h2 class="fs-1 mb-0 me-3"><i class="fab fa-blogger text-warning"></i></h2>
                                    <div>
                                        <h6 class="mb-1">Blogger</h6>
                                        <p class="mb-1 small">شما با موفقیت به حساب Blogger خود وصل شده اید.</p>
                                        <!-- Button -->
                                        <button type="button" class="btn btn-sm btn-primary mb-0 me-2">ورود</button>
                                        <a href="#" class="btn btn-sm btn-link text-body mb-0">کسب اطلاعات</a>
                                    </div>
                                </div>

                                <!-- Facebook -->
                                <div class="d-sm-flex border p-3 rounded mb-2">
                                    <!-- Title and content -->
                                    <h2 class="fs-1 mb-0 me-3"><i class="fab fa-facebook text-facebook"></i></h2>
                                    <div>
                                        <h6 class="mb-1">Facebook</h6>
                                        <p class="mb-1 small">شما با موفقیت به حساب Facebook خود وصل شده اید.</p>
                                        <!-- Button -->
                                        <button type="button" class="btn btn-sm btn-primary mb-0 me-2">ورود</button>
                                        <a href="#" class="btn btn-sm btn-link text-body mb-0">کسب اطلاعات </a>
                                    </div>
                                </div>
                            </div>
                            <!-- Card body END -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- =======================
        Main contain END -->

    </main>
{% endblock %}
{% block footer_refrences %}

{% endblock %}
